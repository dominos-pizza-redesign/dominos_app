/*! For license information please see 928.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[928],{9928:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Accessor:()=>X,Animation:()=>Z,AnimationChannel:()=>K,AnimationSampler:()=>Q,Buffer:()=>ee,BufferUtils:()=>M,COPY_IDENTITY:()=>q,Camera:()=>te,ColorUtils:()=>I,DenoIO:()=>_e,Document:()=>Ee,ExtensibleProperty:()=>$,Extension:()=>Te,ExtensionProperty:()=>re,FileUtils:()=>S,Format:()=>x,GLB_BUFFER:()=>y,Graph:()=>i,GraphEdge:()=>n,ImageUtils:()=>C,Logger:()=>B,Material:()=>ue,MathUtils:()=>P,Mesh:()=>he,Node:()=>ce,NodeIO:()=>Ce,PlatformIO:()=>Ne,Primitive:()=>fe,PrimitiveTarget:()=>le,Property:()=>H,PropertyType:()=>E,ReaderContext:()=>Re,Root:()=>ye,Scene:()=>pe,Skin:()=>de,Texture:()=>me,TextureChannel:()=>w,TextureInfo:()=>se,VERSION:()=>m,VertexLayout:()=>T,WebIO:()=>Oe,WriterContext:()=>ve,bounds:()=>b,uuid:()=>J});class s{constructor(){this._listeners={}}addEventListener(e,t){const r=this._listeners;return void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t),this}removeEventListener(e,t){if(void 0===this._listeners)return this;const r=this._listeners[e];if(void 0!==r){const e=r.indexOf(t);-1!==e&&r.splice(e,1)}return this}dispatchEvent(e){if(void 0===this._listeners)return this;const t=this._listeners[e.type];if(void 0!==t){const r=t.slice(0);for(let t=0,s=r.length;t<s;t++)r[t].call(this,e)}return this}dispose(){for(const e in this._listeners)delete this._listeners[e]}}class n extends s{constructor(e,t,r,s={}){if(super(),this._name=void 0,this._parent=void 0,this._child=void 0,this._attributes=void 0,this._disposed=!1,this._name=e,this._parent=t,this._child=r,this._attributes=s,!t.isOnGraph(r))throw new Error("Cannot connect disconnected graphs.")}getName(){return this._name}getParent(){return this._parent}getChild(){return this._child}setChild(e){return this._child=e,this}getAttributes(){return this._attributes}dispose(){this._disposed||(this._disposed=!0,this.dispatchEvent({type:"dispose",target:this}),super.dispose())}isDisposed(){return this._disposed}}class i extends s{constructor(...e){super(...e),this._emptySet=new Set,this._edges=new Set,this._parentEdges=new Map,this._childEdges=new Map}listEdges(){return Array.from(this._edges)}listParentEdges(e){return Array.from(this._childEdges.get(e)||this._emptySet)}listParents(e){return this.listParentEdges(e).map((e=>e.getParent()))}listChildEdges(e){return Array.from(this._parentEdges.get(e)||this._emptySet)}listChildren(e){return this.listChildEdges(e).map((e=>e.getChild()))}disconnectParents(e,t){let r=this.listParentEdges(e);return t&&(r=r.filter((e=>t(e.getParent())))),r.forEach((e=>e.dispose())),this}createEdge(e,t,r,s){return this._registerEdge(new n(e,t,r,s))}_registerEdge(e){this._edges.add(e);const t=e.getParent();this._parentEdges.has(t)||this._parentEdges.set(t,new Set),this._parentEdges.get(t).add(e);const r=e.getChild();return this._childEdges.has(r)||this._childEdges.set(r,new Set),this._childEdges.get(r).add(e),e.addEventListener("dispose",(()=>this._removeEdge(e))),e}_removeEdge(e){return this._edges.delete(e),this._parentEdges.get(e.getParent()).delete(e),this._childEdges.get(e.getChild()).delete(e),this}}function o(){return o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},o.apply(this,arguments)}function a(e){return e instanceof n}function u(e){return Array.isArray(e)&&e[0]instanceof n}function h(e){return!!(e&&"object"==typeof e&&Object.values(e)[0]instanceof n)}const c=Symbol("attributes"),f=Symbol("immutableKeys");class l extends s{constructor(e){super(),this._disposed=!1,this.graph=void 0,this[c]=void 0,this[f]=void 0,this.graph=e,this[f]=new Set,this[c]=this._createAttributes()}getDefaults(){return{}}_createAttributes(){const e=this.getDefaults(),t={};for(const r in e){const s=e[r];if(s instanceof l){const e=this.graph.createEdge(r,this,s);e.addEventListener("dispose",(()=>s.dispose())),this[f].add(r),t[r]=e}else t[r]=s}return t}isOnGraph(e){return this.graph===e.graph}isDisposed(){return this._disposed}dispose(){this._disposed||(this.graph.listChildEdges(this).forEach((e=>e.dispose())),this.graph.disconnectParents(this),this._disposed=!0,this.dispatchEvent({type:"dispose"}))}detach(){return this.graph.disconnectParents(this),this}swap(e,t){for(const r in this[c]){const s=this[c][r];if(a(s)){const n=s;n.getChild()===e&&this.setRef(r,t,n.getAttributes())}else if(u(s)){const n=s.find((t=>t.getChild()===e));if(n){const s=n.getAttributes();this.removeRef(r,e).addRef(r,t,s)}}else if(h(s)){const n=s;for(const s in n){const i=n[s];i.getChild()===e&&this.setRefMap(r,s,t,i.getAttributes())}}}return this}get(e){return this[c][e]}set(e,t){return this[c][e]=t,this.dispatchEvent({type:"change",attribute:e})}getRef(e){const t=this[c][e];return t?t.getChild():null}setRef(e,t,r){if(this[f].has(e))throw new Error(`Cannot overwrite immutable attribute, "${e}".`);const s=this[c][e];if(s&&s.dispose(),!t)return this;const n=this.graph.createEdge(e,this,t,r);return n.addEventListener("dispose",(()=>{delete this[c][e],this.dispatchEvent({type:"change",attribute:e})})),this[c][e]=n,this.dispatchEvent({type:"change",attribute:e})}listRefs(e){return this[c][e].map((e=>e.getChild()))}addRef(e,t,r){const s=this.graph.createEdge(e,this,t,r),n=this[c][e];return n.push(s),s.addEventListener("dispose",(()=>{const t=n.filter((e=>e!==s));n.length=0;for(const e of t)n.push(e);this.dispatchEvent({type:"change",attribute:e})})),this.dispatchEvent({type:"change",attribute:e})}removeRef(e,t){return this[c][e].filter((e=>e.getChild()===t)).forEach((e=>e.dispose())),this}listRefMapKeys(e){return Object.keys(this[c][e])}listRefMapValues(e){return Object.values(this[c][e]).map((e=>e.getChild()))}getRefMap(e,t){const r=this[c][e];return r[t]?r[t].getChild():null}setRefMap(e,t,r,s){const n=this[c][e],i=n[t];if(i&&i.dispose(),!r)return this;s=Object.assign(s||{},{key:t});const a=this.graph.createEdge(e,this,r,o({},s,{key:t}));return a.addEventListener("dispose",(()=>{delete n[t],this.dispatchEvent({type:"change",attribute:e,key:t})})),n[t]=a,this.dispatchEvent({type:"change",attribute:e,key:t})}dispatchEvent(e){return super.dispatchEvent(o({},e,{target:this})),this.graph.dispatchEvent(o({},e,{target:this,type:`node:${e.type}`})),this}}var g=r(7160),p=r(5975),d=r(8764).Buffer;const m="v2.0.5",y="@glb.bin";var E,T,R,w,x;function b(e){const t={min:[1/0,1/0,1/0],max:[-1/0,-1/0,-1/0]},r=e.propertyType===E.NODE?[e]:e.listChildren();for(const e of r)e.traverse((e=>{const r=e.getMesh();if(!r)return;const s=A(r,e.getWorldMatrix());v(s.min,t),v(s.max,t)}));return t}function A(e,t){const r={min:[1/0,1/0,1/0],max:[-1/0,-1/0,-1/0]};for(const s of e.listPrimitives()){const e=s.getAttribute("POSITION");if(!e)continue;let n=[0,0,0],i=[0,0,0];for(let s=0;s<e.getCount();s++)n=e.getElement(s,n),i=(0,g.fF)(i,n,t),v(i,r)}return r}function v(e,t){for(let r=0;r<3;r++)t.min[r]=Math.min(e[r],t.min[r]),t.max[r]=Math.max(e[r],t.max[r])}!function(e){e.ACCESSOR="Accessor",e.ANIMATION="Animation",e.ANIMATION_CHANNEL="AnimationChannel",e.ANIMATION_SAMPLER="AnimationSampler",e.BUFFER="Buffer",e.CAMERA="Camera",e.MATERIAL="Material",e.MESH="Mesh",e.PRIMITIVE="Primitive",e.PRIMITIVE_TARGET="PrimitiveTarget",e.NODE="Node",e.ROOT="Root",e.SCENE="Scene",e.SKIN="Skin",e.TEXTURE="Texture",e.TEXTURE_INFO="TextureInfo"}(E||(E={})),function(e){e.INTERLEAVED="interleaved",e.SEPARATE="separate"}(T||(T={})),function(e){e.ARRAY_BUFFER="ARRAY_BUFFER",e.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",e.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",e.OTHER="OTHER"}(R||(R={})),function(e){e[e.R=4096]="R",e[e.G=256]="G",e[e.B=16]="B",e[e.A=1]="A"}(w||(w={})),function(e){e.GLTF="GLTF",e.GLB="GLB"}(x||(x={}));class M{static createBufferFromDataURI(e){if(void 0===d){const t=atob(e.split(",")[1]),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r}{const t=e.split(",")[1],r=e.indexOf("base64")>=0;return d.from(t,r?"base64":"utf8")}}static encodeText(e){return"undefined"!=typeof TextEncoder?(new TextEncoder).encode(e):d.from(e)}static decodeText(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):d.from(e).toString("utf8")}static concat(e){let t=0;for(const r of e)t+=r.byteLength;const r=new Uint8Array(t);let s=0;for(const t of e)r.set(t,s),s+=t.byteLength;return r}static pad(e,t=0){const r=this.padNumber(e.byteLength);if(r===e.byteLength)return e;const s=new Uint8Array(r);if(s.set(e),0!==t)for(let n=e.byteLength;n<r;n++)s[n]=t;return s}static padNumber(e){return 4*Math.ceil(e/4)}static equals(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;let r=e.byteLength;for(;r--;)if(e[r]!==t[r])return!1;return!0}static toView(e,t=0,r=1/0){return new Uint8Array(e.buffer,e.byteOffset+t,Math.min(e.byteLength,r))}static assertView(e){if(e&&!ArrayBuffer.isView(e))throw new Error(`Method requires Uint8Array parameter; received "${typeof e}".`);return e}}class I{static hexToFactor(e,t){e=Math.floor(e);const r=t;return r[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,this.convertSRGBToLinear(t,t)}static factorToHex(e){const t=[...e],[r,s,n]=this.convertLinearToSRGB(e,t);return 255*r<<16^255*s<<8^255*n<<0}static convertSRGBToLinear(e,t){const r=e,s=t;for(let e=0;e<3;e++)s[e]=r[e]<.04045?.0773993808*r[e]:Math.pow(.9478672986*r[e]+.0521327014,2.4);return t}static convertLinearToSRGB(e,t){const r=e,s=t;for(let e=0;e<3;e++)s[e]=r[e]<.0031308?12.92*r[e]:1.055*Math.pow(r[e],.41666)-.055;return t}}class S{static basename(e){const t=(e=new URL(e,"https://null.example").pathname).split(/[\\/]/).pop();return t.substring(0,t.lastIndexOf("."))}static extension(e){return 0!==e.indexOf("data:")?(e=new URL(e,"https://null.example").pathname).split(/[\\/]/).pop().split(/[.]/).pop():0===e.indexOf("data:image/png")?"png":0===e.indexOf("data:image/jpeg")?"jpeg":"bin"}}class N{match(e){return e.length>=8&&137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]&&13===e[4]&&10===e[5]&&26===e[6]&&10===e[7]}getSize(e){const t=new DataView(e.buffer,e.byteOffset);return M.decodeText(e.slice(12,16))===N.PNG_FRIED_CHUNK_NAME?[t.getUint32(32,!1),t.getUint32(36,!1)]:[t.getUint32(16,!1),t.getUint32(20,!1)]}getChannels(e){return 4}}N.PNG_FRIED_CHUNK_NAME="CgBI";class C{static registerFormat(e,t){this.impls[e]=t}static getMimeType(e){for(const t in this.impls)if(this.impls[t].match(e))return t;return null}static getSize(e,t){return this.impls[t]?this.impls[t].getSize(e):null}static getChannels(e,t){return this.impls[t]?this.impls[t].getChannels(e):null}static getMemSize(e,t){if(!this.impls[t])return null;if(this.impls[t].getGPUByteLength)return this.impls[t].getGPUByteLength(e);let r=0;const s=this.getSize(e,t);if(!s)return null;for(;s[0]>1||s[1]>1;)r+=s[0]*s[1]*4,s[0]=Math.max(Math.floor(s[0]/2),1),s[1]=Math.max(Math.floor(s[1]/2),1);return r+=4,r}static mimeTypeToExtension(e){return"image/jpeg"===e?"jpg":e.split("/").pop()}static extensionToMimeType(e){return"jpg"===e?"image/jpeg":`image/${e}`}}function _(e,t){if(t>e.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==e.getUint8(t))throw new TypeError("Invalid JPG, marker table corrupted");return e}function O(e){return"[object Object]"===Object.prototype.toString.call(e)}function U(e){if(!1===O(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!1!==O(r)&&!1!==Object.prototype.hasOwnProperty.call(r,"isPrototypeOf")}C.impls={"image/jpeg":new class{match(e){return e.length>=3&&255===e[0]&&216===e[1]&&255===e[2]}getSize(e){let t,r,s=new DataView(e.buffer,e.byteOffset+4);for(;s.byteLength;){if(t=s.getUint16(0,!1),_(s,t),r=s.getUint8(t+1),192===r||193===r||194===r)return[s.getUint16(t+7,!1),s.getUint16(t+5,!1)];s=new DataView(e.buffer,s.byteOffset+t+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(e){return 3}},"image/png":new N};class B{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=B.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=B.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=B.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=B.Verbosity.ERROR&&console.error(e)}}B.Verbosity={SILENT:4,ERROR:3,WARN:2,INFO:1,DEBUG:0},B.DEFAULT_INSTANCE=new B(B.Verbosity.INFO);class P{static identity(e){return e}static eq(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(Math.abs(e[r]-t[r])>1e-5)return!1;return!0}static denormalize(e,t){switch(t){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static normalize(e,t){switch(t){case 5126:return e;case 5123:return Math.round(65535*e);case 5121:return Math.round(255*e);case 5122:return Math.round(32767*e);case 5120:return Math.round(127*e);default:throw new Error("Invalid component type.")}}static decompose(e,t,r,s){let n=(0,g.kE)([e[0],e[1],e[2]]);const i=(0,g.kE)([e[4],e[5],e[6]]),o=(0,g.kE)([e[8],e[9],e[10]]);(0,p.GH)(e)<0&&(n=-n),t[0]=e[12],t[1]=e[13],t[2]=e[14];const a=e.slice(),u=1/n,h=1/i,c=1/o;a[0]*=u,a[1]*=u,a[2]*=u,a[4]*=h,a[5]*=h,a[6]*=h,a[8]*=c,a[9]*=c,a[10]*=c,(0,p.j6)(r,a),s[0]=n,s[1]=i,s[2]=o}static compose(e,t,r,s){const n=s,i=t[0],o=t[1],a=t[2],u=t[3],h=i+i,c=o+o,f=a+a,l=i*h,g=i*c,p=i*f,d=o*c,m=o*f,y=a*f,E=u*h,T=u*c,R=u*f,w=r[0],x=r[1],b=r[2];return n[0]=(1-(d+y))*w,n[1]=(g+R)*w,n[2]=(p-T)*w,n[3]=0,n[4]=(g-R)*x,n[5]=(1-(l+y))*x,n[6]=(m+E)*x,n[7]=0,n[8]=(p+T)*b,n[9]=(m-E)*b,n[10]=(1-(l+d))*b,n[11]=0,n[12]=e[0],n[13]=e[1],n[14]=e[2],n[15]=1,n}}function F(e,t){if(!!e!=!!t)return!1;const r=e.getChild(),s=t.getChild();return r===s||r.equals(s)}function L(e,t){if(!!e!=!!t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){const s=e[r],n=t[r];if(s.getChild()!==n.getChild()&&!s.getChild().equals(n.getChild()))return!1}return!0}function D(e,t){if(!!e!=!!t)return!1;const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const r in e){const s=e[r],n=t[r];if(!!s!=!!n)return!1;const i=s.getChild(),o=n.getChild();if(i!==o&&!i.equals(o))return!1}return!0}function V(e,t){if(e===t)return!0;if(!!e!=!!t||!e||!t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function j(e,t){if(e===t)return!0;if(!!e!=!!t)return!1;if(!U(e)||!U(t))return e===t;const r=e,s=t;let n,i=0,o=0;for(n in r)i++;for(n in s)o++;if(i!==o)return!1;for(n in r){const e=r[n],t=s[n];if(k(e)&&k(t)){if(!V(e,t))return!1}else if(U(e)&&U(t)){if(!j(e,t))return!1}else if(e!==t)return!1}return!0}function k(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const Y="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",G=new Set,z=function(){let e="";for(let t=0;t<6;t++)e+=Y.charAt(Math.floor(Math.random()*Y.length));return e},J=function(){for(let e=0;e<999;e++){const e=z();if(!G.has(e))return G.add(e),e}return""};class W{static dirname(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substring(0,t+1)}static resolve(e,t){if(!this.isRelativePath(t))return t;const r=e.split("/"),s=t.split("/");r.pop();for(let e=0;e<s.length;e++)"."!==s[e]&&(".."===s[e]?r.pop():r.push(s[e]));return r.join("/")}static isAbsoluteURL(e){return this.PROTOCOL_REGEXP.test(e)}static isRelativePath(e){return!/^(?:[a-zA-Z]+:)?\//.test(e)}}W.DEFAULT_INIT={},W.PROTOCOL_REGEXP=/^[a-zA-Z]+:\/\//;const q=e=>e;class H extends l{constructor(e,t=""){super(e),this[c].name=t,this.init(),this.dispatchEvent({type:"create"})}getDefaults(){return Object.assign(super.getDefaults(),{name:"",extras:{}})}getName(){return this.get("name")}setName(e){return this.set("name",e)}getExtras(){return this.get("extras")}setExtras(e){return this.set("extras",e)}clone(){return new(0,this.constructor)(this.graph).copy(this,q)}copy(e,t=q){for(const e in this[c]){const t=this[c][e];if(t instanceof n)this[f].has(e)||t.dispose();else if(Array.isArray(t)&&t[0]instanceof n)for(const e of t)e.dispose();else if(U(t)&&Object.values(t)[0]instanceof n)for(const e in t)t[e].dispose()}for(const r in e[c]){const s=this[c][r],i=e[c][r];if(i instanceof n)this[f].has(r)?s.getChild().copy(t(i.getChild()),t):this.setRef(r,t(i.getChild()),i.getAttributes());else if(Array.isArray(i)&&i[0]instanceof n)for(const e of i)this.addRef(r,t(e.getChild()),e.getAttributes());else if(U(i)&&Object.values(i)[0]instanceof n)for(const e in i){const s=i[e];this.setRefMap(r,e,t(s.getChild()),s.getAttributes())}else this[c][r]=U(i)?JSON.parse(JSON.stringify(i)):Array.isArray(i)||i instanceof ArrayBuffer||ArrayBuffer.isView(i)?i.slice():i}return this}equals(e){if(this===e)return!0;if(this.propertyType!==e.propertyType)return!1;for(const t in this[c]){const r=this[c][t],s=e[c][t];if(a(r)||a(s)){if(!F(r,s))return!1}else if(u(r)||u(s)){if(!L(r,s))return!1}else if(h(r)||h(s)){if(!D(r,s))return!1}else if(U(r)||U(s)){if(!j(r,s))return!1}else if(k(r)||k(s)){if(!V(r,s))return!1}else if(r!==s)return!1}return!0}detach(){return this.graph.disconnectParents(this,(e=>"Root"!==e.propertyType)),this}listParents(){return this.graph.listParents(this)}}class $ extends H{getDefaults(){return Object.assign(super.getDefaults(),{extensions:{}})}getExtension(e){return this.getRefMap("extensions",e)}setExtension(e,t){return t&&t.t(this),this.setRefMap("extensions",e,t)}listExtensions(){return this.listRefMapValues("extensions")}}class X extends ${constructor(...e){super(...e),this.i=P.identity,this.o=P.identity}init(){this.propertyType=E.ACCESSOR}getDefaults(){return Object.assign(super.getDefaults(),{array:null,type:X.Type.SCALAR,componentType:X.ComponentType.FLOAT,normalized:!1,buffer:null})}copy(e,t=q){return super.copy(e,t),this.i=e.i,this.o=e.o,this}static getElementSize(e){switch(e){case X.Type.SCALAR:return 1;case X.Type.VEC2:return 2;case X.Type.VEC3:return 3;case X.Type.VEC4:case X.Type.MAT2:return 4;case X.Type.MAT3:return 9;case X.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case X.ComponentType.BYTE:case X.ComponentType.UNSIGNED_BYTE:return 1;case X.ComponentType.SHORT:case X.ComponentType.UNSIGNED_SHORT:return 2;case X.ComponentType.UNSIGNED_INT:case X.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const t=this.getElementSize();this.getMin(e);for(let r=0;r<t;r++)e[r]=this.o(e[r]);return e}getMin(e){const t=this.get("array"),r=this.getCount(),s=this.getElementSize();for(let t=0;t<s;t++)e[t]=1/0;for(let n=0;n<r*s;n+=s)for(let r=0;r<s;r++){const s=t[n+r];Number.isFinite(s)&&(e[r]=Math.min(e[r],s))}return e}getMaxNormalized(e){const t=this.getElementSize();this.getMax(e);for(let r=0;r<t;r++)e[r]=this.o(e[r]);return e}getMax(e){const t=this.get("array"),r=this.getCount(),s=this.getElementSize();for(let t=0;t<s;t++)e[t]=-1/0;for(let n=0;n<r*s;n+=s)for(let r=0;r<s;r++){const s=t[n+r];Number.isFinite(s)&&(e[r]=Math.max(e[r],s))}return e}getCount(){const e=this.get("array");return e?e.length/this.getElementSize():0}getType(){return this.get("type")}setType(e){return this.set("type",e)}getElementSize(){return X.getElementSize(this.get("type"))}getComponentSize(){return this.get("array").BYTES_PER_ELEMENT}getComponentType(){return this.get("componentType")}getNormalized(){return this.get("normalized")}setNormalized(e){return this.set("normalized",e),e?(this.o=e=>P.denormalize(e,this.get("componentType")),this.i=e=>P.normalize(e,this.get("componentType"))):(this.o=P.identity,this.i=P.identity),this}getScalar(e){const t=this.getElementSize();return this.o(this.get("array")[e*t])}setScalar(e,t){return this.get("array")[e*this.getElementSize()]=this.i(t),this}getElement(e,t){const r=this.getElementSize(),s=this.get("array");for(let n=0;n<r;n++)t[n]=this.o(s[e*r+n]);return t}setElement(e,t){const r=this.getElementSize(),s=this.get("array");for(let n=0;n<r;n++)s[e*r+n]=this.i(t[n]);return this}getBuffer(){return this.getRef("buffer")}setBuffer(e){return this.setRef("buffer",e)}getArray(){return this.get("array")}setArray(e){return this.set("componentType",e?function(e){switch(e.constructor){case Float32Array:return X.ComponentType.FLOAT;case Uint32Array:return X.ComponentType.UNSIGNED_INT;case Uint16Array:return X.ComponentType.UNSIGNED_SHORT;case Uint8Array:return X.ComponentType.UNSIGNED_BYTE;case Int16Array:return X.ComponentType.SHORT;case Int8Array:return X.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}(e):X.ComponentType.FLOAT),this.set("array",e),this}getByteLength(){const e=this.get("array");return e?e.byteLength:0}}X.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"},X.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};class Z extends ${init(){this.propertyType=E.ANIMATION}getDefaults(){return Object.assign(super.getDefaults(),{channels:[],samplers:[]})}addChannel(e){return this.addRef("channels",e)}removeChannel(e){return this.removeRef("channels",e)}listChannels(){return this.listRefs("channels")}addSampler(e){return this.addRef("samplers",e)}removeSampler(e){return this.removeRef("samplers",e)}listSamplers(){return this.listRefs("samplers")}}class K extends ${init(){this.propertyType=E.ANIMATION_CHANNEL}getDefaults(){return Object.assign(super.getDefaults(),{targetPath:null,targetNode:null,sampler:null})}getTargetPath(){return this.get("targetPath")}setTargetPath(e){return this.set("targetPath",e)}getTargetNode(){return this.getRef("targetNode")}setTargetNode(e){return this.setRef("targetNode",e)}getSampler(){return this.getRef("sampler")}setSampler(e){return this.setRef("sampler",e)}}K.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};class Q extends ${init(){this.propertyType=E.ANIMATION_SAMPLER}getDefaultAttributes(){return Object.assign(super.getDefaults(),{interpolation:Q.Interpolation.LINEAR,input:null,output:null})}getInterpolation(){return this.get("interpolation")}setInterpolation(e){return this.set("interpolation",e)}getInput(){return this.getRef("input")}setInput(e){return this.setRef("input",e,{usage:R.OTHER})}getOutput(){return this.getRef("output")}setOutput(e){return this.setRef("output",e,{usage:R.OTHER})}}Q.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"};class ee extends ${init(){this.propertyType=E.BUFFER}getDefaults(){return Object.assign(super.getDefaults(),{uri:""})}getURI(){return this.get("uri")}setURI(e){return this.set("uri",e)}}class te extends ${init(){this.propertyType=E.CAMERA}getDefaults(){return Object.assign(super.getDefaults(),{type:te.Type.PERSPECTIVE,znear:.1,zfar:100,aspectRatio:null,yfov:2*Math.PI*50/360,xmag:1,ymag:1})}getType(){return this.get("type")}setType(e){return this.set("type",e)}getZNear(){return this.get("znear")}setZNear(e){return this.set("znear",e)}getZFar(){return this.get("zfar")}setZFar(e){return this.set("zfar",e)}getAspectRatio(){return this.get("aspectRatio")}setAspectRatio(e){return this.set("aspectRatio",e)}getYFov(){return this.get("yfov")}setYFov(e){return this.set("yfov",e)}getXMag(){return this.get("xmag")}setXMag(e){return this.set("xmag",e)}getYMag(){return this.get("ymag")}setYMag(e){return this.set("ymag",e)}}te.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class re extends H{t(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}}re.EXTENSION_NAME=void 0;class se extends ${init(){this.propertyType=E.TEXTURE_INFO}getDefaults(){return Object.assign(super.getDefaults(),{texCoord:0,magFilter:null,minFilter:null,wrapS:se.WrapMode.REPEAT,wrapT:se.WrapMode.REPEAT})}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}getMagFilter(){return this.get("magFilter")}setMagFilter(e){return this.set("magFilter",e)}getMinFilter(){return this.get("minFilter")}setMinFilter(e){return this.set("minFilter",e)}getWrapS(){return this.get("wrapS")}setWrapS(e){return this.set("wrapS",e)}getWrapT(){return this.get("wrapT")}setWrapT(e){return this.set("wrapT",e)}}se.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},se.MagFilter={NEAREST:9728,LINEAR:9729},se.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:ne,G:ie,B:oe,A:ae}=w;class ue extends ${init(){this.propertyType=E.MATERIAL}getDefaults(){return Object.assign(super.getDefaults(),{alphaMode:ue.AlphaMode.OPAQUE,alphaCutoff:.5,doubleSided:!1,baseColorFactor:[1,1,1,1],baseColorTexture:null,baseColorTextureInfo:new se(this.graph,"baseColorTextureInfo"),emissiveFactor:[0,0,0],emissiveTexture:null,emissiveTextureInfo:new se(this.graph,"emissiveTextureInfo"),normalScale:1,normalTexture:null,normalTextureInfo:new se(this.graph,"normalTextureInfo"),occlusionStrength:1,occlusionTexture:null,occlusionTextureInfo:new se(this.graph,"occlusionTextureInfo"),roughnessFactor:1,metallicFactor:1,metallicRoughnessTexture:null,metallicRoughnessTextureInfo:new se(this.graph,"metallicRoughnessTextureInfo")})}getDoubleSided(){return this.get("doubleSided")}setDoubleSided(e){return this.set("doubleSided",e)}getAlpha(){return this.get("baseColorFactor")[3]}setAlpha(e){const t=this.get("baseColorFactor").slice();return t[3]=e,this.set("baseColorFactor",t)}getAlphaMode(){return this.get("alphaMode")}setAlphaMode(e){return this.set("alphaMode",e)}getAlphaCutoff(){return this.get("alphaCutoff")}setAlphaCutoff(e){return this.set("alphaCutoff",e)}getBaseColorFactor(){return this.get("baseColorFactor")}setBaseColorFactor(e){return this.set("baseColorFactor",e)}getBaseColorHex(){return I.factorToHex(this.get("baseColorFactor"))}setBaseColorHex(e){const t=this.get("baseColorFactor").slice();return this.set("baseColorFactor",I.hexToFactor(e,t))}getBaseColorTexture(){return this.getRef("baseColorTexture")}getBaseColorTextureInfo(){return this.getRef("baseColorTexture")?this.getRef("baseColorTextureInfo"):null}setBaseColorTexture(e){return this.setRef("baseColorTexture",e,{channels:ne|ie|oe|ae})}getEmissiveFactor(){return this.get("emissiveFactor")}setEmissiveFactor(e){return this.set("emissiveFactor",e)}getEmissiveHex(){return I.factorToHex(this.get("emissiveFactor"))}setEmissiveHex(e){const t=this.get("emissiveFactor").slice();return this.set("emissiveFactor",I.hexToFactor(e,t))}getEmissiveTexture(){return this.getRef("emissiveTexture")}getEmissiveTextureInfo(){return this.getRef("emissiveTexture")?this.getRef("emissiveTextureInfo"):null}setEmissiveTexture(e){return this.setRef("emissiveTexture",e,{channels:ne|ie|oe})}getNormalScale(){return this.get("normalScale")}setNormalScale(e){return this.set("normalScale",e)}getNormalTexture(){return this.getRef("normalTexture")}getNormalTextureInfo(){return this.getRef("normalTexture")?this.getRef("normalTextureInfo"):null}setNormalTexture(e){return this.setRef("normalTexture",e,{channels:ne|ie|oe})}getOcclusionStrength(){return this.get("occlusionStrength")}setOcclusionStrength(e){return this.set("occlusionStrength",e)}getOcclusionTexture(){return this.getRef("occlusionTexture")}getOcclusionTextureInfo(){return this.getRef("occlusionTexture")?this.getRef("occlusionTextureInfo"):null}setOcclusionTexture(e){return this.setRef("occlusionTexture",e,{channels:ne})}getRoughnessFactor(){return this.get("roughnessFactor")}setRoughnessFactor(e){return this.set("roughnessFactor",e)}getMetallicFactor(){return this.get("metallicFactor")}setMetallicFactor(e){return this.set("metallicFactor",e)}getMetallicRoughnessTexture(){return this.getRef("metallicRoughnessTexture")}getMetallicRoughnessTextureInfo(){return this.getRef("metallicRoughnessTexture")?this.getRef("metallicRoughnessTextureInfo"):null}setMetallicRoughnessTexture(e){return this.setRef("metallicRoughnessTexture",e,{channels:ie|oe})}}ue.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};class he extends ${init(){this.propertyType=E.MESH}getDefaults(){return Object.assign(super.getDefaults(),{weights:[],primitives:[]})}addPrimitive(e){return this.addRef("primitives",e)}removePrimitive(e){return this.removeRef("primitives",e)}listPrimitives(){return this.listRefs("primitives")}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}}class ce extends ${constructor(...e){super(...e),this.u=null}init(){this.propertyType=E.NODE}getDefaults(){return Object.assign(super.getDefaults(),{translation:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1],weights:[],camera:null,mesh:null,skin:null,children:[]})}copy(e,t=q){if(t===q)throw new Error("Node cannot be copied.");return super.copy(e,t)}getTranslation(){return this.get("translation")}getRotation(){return this.get("rotation")}getScale(){return this.get("scale")}setTranslation(e){return this.set("translation",e)}setRotation(e){return this.set("rotation",e)}setScale(e){return this.set("scale",e)}getMatrix(){return P.compose(this.get("translation"),this.get("rotation"),this.get("scale"),[])}setMatrix(e){const t=this.get("translation").slice(),r=this.get("rotation").slice(),s=this.get("scale").slice();return P.decompose(e,t,r,s),this.set("translation",t).set("rotation",r).set("scale",s)}getWorldTranslation(){const e=[0,0,0];return P.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return P.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return P.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let t=this;t instanceof ce;t=t.u)e.push(t);let t;const r=e.pop().getMatrix();for(;t=e.pop();)(0,p.Jp)(r,r,t.getMatrix());return r}addChild(e){e.u&&e.u.removeChild(e),this.addRef("children",e),e.u=this;const t=this[c].children;return t[t.length-1].addEventListener("dispose",(()=>e.u=null)),this}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}getParent(){return this.u}getMesh(){return this.getRef("mesh")}setMesh(e){return this.setRef("mesh",e)}getCamera(){return this.getRef("camera")}setCamera(e){return this.setRef("camera",e)}getSkin(){return this.getRef("skin")}setSkin(e){return this.setRef("skin",e)}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}traverse(e){e(this);for(const t of this.listChildren())t.traverse(e);return this}}class fe extends ${init(){this.propertyType=E.PRIMITIVE}getDefaults(){return Object.assign(super.getDefaults(),{mode:fe.Mode.TRIANGLES,material:null,indices:null,attributes:{},targets:[]})}getIndices(){return this.getRef("indices")}setIndices(e){return this.setRef("indices",e,{usage:R.ELEMENT_ARRAY_BUFFER})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,t){return this.setRefMap("attributes",e,t,{usage:R.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}getMode(){return this.get("mode")}setMode(e){return this.set("mode",e)}listTargets(){return this.listRefs("targets")}addTarget(e){return this.addRef("targets",e)}removeTarget(e){return this.removeRef("targets",e)}}fe.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class le extends H{init(){this.propertyType=E.PRIMITIVE_TARGET}getDefaults(){return Object.assign(super.getDefaults(),{attributes:{}})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,t){return this.setRefMap("attributes",e,t,{usage:R.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}class pe extends ${init(){this.propertyType=E.SCENE}getDefaults(){return Object.assign(super.getDefaults(),{children:[]})}copy(e,t=q){if(t===q)throw new Error("Scene cannot be copied.");return super.copy(e,t)}addChild(e){e.u&&e.u.removeChild(e),this.addRef("children",e),e.u=this;const t=this[c].children;return t[t.length-1].addEventListener("dispose",(()=>e.u=null)),this}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}traverse(e){for(const t of this.listChildren())t.traverse(e);return this}}class de extends ${init(){this.propertyType=E.SKIN}getDefaults(){return Object.assign(super.getDefaults(),{skeleton:null,inverseBindMatrices:null,joints:[]})}getSkeleton(){return this.getRef("skeleton")}setSkeleton(e){return this.setRef("skeleton",e)}getInverseBindMatrices(){return this.getRef("inverseBindMatrices")}setInverseBindMatrices(e){return this.setRef("inverseBindMatrices",e,{usage:R.INVERSE_BIND_MATRICES})}addJoint(e){return this.addRef("joints",e)}removeJoint(e){return this.removeRef("joints",e)}listJoints(){return this.listRefs("joints")}}class me extends ${init(){this.propertyType=E.TEXTURE}getDefaults(){return Object.assign(super.getDefaults(),{image:null,mimeType:"",uri:""})}getMimeType(){return this.get("mimeType")||C.extensionToMimeType(S.extension(this.get("uri")))}setMimeType(e){return this.set("mimeType",e)}getURI(){return this.get("uri")}setURI(e){return this.set("uri",e),this.set("mimeType",C.extensionToMimeType(S.extension(e))),this}getImage(){return this.get("image")}setImage(e){return this.set("image",M.assertView(e))}getSize(){const e=this.get("image");return e?C.getSize(e,this.getMimeType()):null}}class ye extends ${init(){this.propertyType=E.ROOT}getDefaults(){return Object.assign(super.getDefaults(),{asset:{generator:"glTF-Transform v2.0.5",version:"2.0"},defaultScene:null,accessors:[],animations:[],buffers:[],cameras:[],materials:[],meshes:[],nodes:[],scenes:[],skins:[],textures:[]})}constructor(e){super(e),this.h=new Set,e.addEventListener("node:create",(e=>{this.l(e.target)}))}clone(){throw new Error("Root cannot be cloned.")}copy(e,t=q){if(t===q)throw new Error("Root cannot be copied.");this.set("asset",ge({},e.get("asset"))),this.setName(e.getName()),this.setExtras(ge({},e.getExtras())),this.setDefaultScene(e.getDefaultScene()?t(e.getDefaultScene()):null);for(const r of e.listRefMapKeys("extensions")){const s=e.getExtension(r);this.setExtension(r,t(s))}return this}l(e){return e instanceof pe?this.addRef("scenes",e):e instanceof ce?this.addRef("nodes",e):e instanceof te?this.addRef("cameras",e):e instanceof de?this.addRef("skins",e):e instanceof he?this.addRef("meshes",e):e instanceof ue?this.addRef("materials",e):e instanceof me?this.addRef("textures",e):e instanceof Z?this.addRef("animations",e):e instanceof X?this.addRef("accessors",e):e instanceof ee&&this.addRef("buffers",e),this}getAsset(){return this.get("asset")}listExtensionsUsed(){return Array.from(this.h)}listExtensionsRequired(){return this.listExtensionsUsed().filter((e=>e.isRequired()))}g(e){return this.h.add(e),this}p(e){return this.h.delete(e),this}listScenes(){return this.listRefs("scenes")}setDefaultScene(e){return this.setRef("defaultScene",e)}getDefaultScene(){return this.getRef("defaultScene")}listNodes(){return this.listRefs("nodes")}listCameras(){return this.listRefs("cameras")}listSkins(){return this.listRefs("skins")}listMeshes(){return this.listRefs("meshes")}listMaterials(){return this.listRefs("materials")}listTextures(){return this.listRefs("textures")}listAnimations(){return this.listRefs("animations")}listAccessors(){return this.listRefs("accessors")}listBuffers(){return this.listRefs("buffers")}}class Ee{constructor(){this.m=new i,this.T=new ye(this.m),this.v=B.DEFAULT_INSTANCE}getRoot(){return this.T}getGraph(){return this.m}getLogger(){return this.v}setLogger(e){return this.v=e,this}clone(){return(new Ee).setLogger(this.v).merge(this)}merge(e){for(const t of e.getRoot().listExtensionsUsed()){const e=this.createExtension(t.constructor);t.isRequired()&&e.setRequired(!0)}const t=new Set,r=new Map;t.add(e.T),r.set(e.T,this.T);for(const s of e.m.listEdges())for(const e of[s.getParent(),s.getChild()]){if(t.has(e))continue;let s;s=e.propertyType===E.TEXTURE_INFO?e:new(0,e.constructor)(this.m),r.set(e,s),t.add(e)}const s=e=>{const t=r.get(e);if(!t)throw new Error("Could resolve property.");return t};for(const e of t){const t=r.get(e);if(!t)throw new Error("Could resolve property.");t.copy(e,s)}return this}async transform(...e){const t=e.map((e=>e.name));for(const r of e)await r(this,{stack:t});return this}createExtension(e){const t=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find((e=>e.extensionName===t))||new e(this)}createScene(e=""){return new pe(this.m,e)}createNode(e=""){return new ce(this.m,e)}createCamera(e=""){return new te(this.m,e)}createSkin(e=""){return new de(this.m,e)}createMesh(e=""){return new he(this.m,e)}createPrimitive(){return new fe(this.m)}createPrimitiveTarget(e=""){return new le(this.m,e)}createMaterial(e=""){return new ue(this.m,e)}createTexture(e=""){return new me(this.m,e)}createAnimation(e=""){return new Z(this.m,e)}createAnimationChannel(e=""){return new K(this.m,e)}createAnimationSampler(e=""){return new Q(this.m,e)}createAccessor(e="",t=null){return t||(t=this.getRoot().listBuffers()[0]),new X(this.m,e).setBuffer(t)}createBuffer(e=""){return new ee(this.m,e)}}class Te{constructor(e){this.extensionName="",this.prereadTypes=[],this.prewriteTypes=[],this.readDependencies=[],this.writeDependencies=[],this.document=void 0,this.required=!1,this.properties=new Set,this.S=void 0,this.document=e,e.getRoot().g(this),this.S=e=>{const t=e,r=t.target;r instanceof re&&r.extensionName===this.extensionName&&("node:create"===t.type&&this.M(r),"node:dispose"===t.type&&this.I(r))};const t=e.getGraph();t.addEventListener("node:create",this.S),t.addEventListener("node:dispose",this.S)}dispose(){this.document.getRoot().p(this);const e=this.document.getGraph();e.removeEventListener("node:create",this.S),e.removeEventListener("node:dispose",this.S);for(const e of this.properties)e.dispose()}static register(){}isRequired(){return this.required}setRequired(e){return this.required=e,this}M(e){return this.properties.add(e),this}I(e){return this.properties.delete(e),this}install(e,t){return this}preread(e,t){return this}prewrite(e,t){return this}}Te.EXTENSION_NAME=void 0;class Re{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,t){this.textureInfos.set(e,t),void 0!==t.texCoord&&e.setTexCoord(t.texCoord);const r=this.jsonDoc.json.textures[t.index];if(void 0===r.sampler)return;const s=this.jsonDoc.json.samplers[r.sampler];void 0!==s.magFilter&&e.setMagFilter(s.magFilter),void 0!==s.minFilter&&e.setMinFilter(s.minFilter),void 0!==s.wrapS&&e.setWrapS(s.wrapS),void 0!==s.wrapT&&e.setWrapT(s.wrapT)}}const we={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},xe={logger:B.DEFAULT_INSTANCE,extensions:[],dependencies:{}};function be(e,t){const r=t.bufferViews[e.bufferView],s=t.jsonDoc.json.bufferViews[e.bufferView],n=we[e.componentType],i=X.getElementSize(e.type),o=n.BYTES_PER_ELEMENT;if(void 0!==s.byteStride&&s.byteStride!==i*o)return function(e,t){const r=t.bufferViews[e.bufferView],s=t.jsonDoc.json.bufferViews[e.bufferView],n=we[e.componentType],i=X.getElementSize(e.type),o=n.BYTES_PER_ELEMENT,a=e.byteOffset||0,u=new n(e.count*i),h=new DataView(r.buffer,r.byteOffset,r.byteLength),c=s.byteStride;for(let t=0;t<e.count;t++)for(let r=0;r<i;r++){const s=a+t*c+r*o;let n;switch(e.componentType){case X.ComponentType.FLOAT:n=h.getFloat32(s,!0);break;case X.ComponentType.UNSIGNED_INT:n=h.getUint32(s,!0);break;case X.ComponentType.UNSIGNED_SHORT:n=h.getUint16(s,!0);break;case X.ComponentType.UNSIGNED_BYTE:n=h.getUint8(s);break;case X.ComponentType.SHORT:n=h.getInt16(s,!0);break;case X.ComponentType.BYTE:n=h.getInt8(s);break;default:throw new Error(`Unexpected componentType "${e.componentType}".`)}u[t*i+r]=n}return u}(e,t);const a=r.byteOffset+(e.byteOffset||0);return new n(r.buffer.slice(a,a+e.count*i*o))}var Ae;!function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"}(Ae||(Ae={}));class ve{constructor(e,t,r){this.N=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.animationIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.sceneIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this.O=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this.N=e,this.jsonDoc=t,this.options=r;const s=e.getRoot(),n=s.listBuffers().length,i=s.listTextures().length;this.bufferURIGenerator=new Me(n>1,r.basename),this.imageURIGenerator=new Me(i>1,r.basename),this.logger=e.getLogger()}createTextureInfoDef(e,t){const r={magFilter:t.getMagFilter()||void 0,minFilter:t.getMinFilter()||void 0,wrapS:t.getWrapS(),wrapT:t.getWrapT()},s=JSON.stringify(r);this.samplerDefIndexMap.has(s)||(this.samplerDefIndexMap.set(s,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(r));const n={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(s)},i=JSON.stringify(n);this.textureDefIndexMap.has(i)||(this.textureDefIndexMap.set(i,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(n));const o={index:this.textureDefIndexMap.get(i)};return 0!==t.getTexCoord()&&(o.texCoord=t.getTexCoord()),this.textureInfoDefMap.set(t,o),o}createPropertyDef(e){const t={};return e.getName()&&(t.name=e.getName()),Object.keys(e.getExtras()).length>0&&(t.extras=e.getExtras()),t}createAccessorDef(e){const t=this.createPropertyDef(e);return t.type=e.getType(),t.componentType=e.getComponentType(),t.count=e.getCount(),this.N.getGraph().listParentEdges(e).some((e=>"attributes"===e.getName()&&"POSITION"===e.getAttributes().key||"input"===e.getName()))&&(t.max=e.getMax([]).map(Math.fround),t.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(t.normalized=e.getNormalized()),t}createImageData(e,t,r){if(this.options.format===x.GLB)this.imageBufferViews.push(t),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:t.byteLength});else{const s=C.mimeTypeToExtension(r.getMimeType());e.uri=this.imageURIGenerator.createURI(r,s),this.jsonDoc.resources[e.uri]=t}}getAccessorUsage(e){const t=this.O.get(e);if(t)return t;for(const t of this.N.getGraph().listParentEdges(e)){const{usage:e}=t.getAttributes();if(e)return e;t.getParent().propertyType!==E.ROOT&&this.N.getLogger().warn(`Missing attribute ".usage" on edge, "${t.getName()}".`)}return ve.BufferViewUsage.OTHER}addAccessorToUsageGroup(e,t){const r=this.O.get(e);if(r&&r!==t)throw new Error(`Accessor with usage "${r}" cannot be reused as "${t}".`);return this.O.set(e,t),this}listAccessorUsageGroups(){const e={};for(const[t,r]of Array.from(this.O.entries()))e[r]=e[r]||[],e[r].push(t);return e}}ve.BufferViewTarget=Ae,ve.BufferViewUsage=R,ve.USAGE_TO_TARGET={[R.ARRAY_BUFFER]:Ae.ARRAY_BUFFER,[R.ELEMENT_ARRAY_BUFFER]:Ae.ELEMENT_ARRAY_BUFFER};class Me{constructor(e,t){this.multiple=void 0,this.basename=void 0,this.counter=1,this.multiple=e,this.basename=t}createURI(e,t){return e.getURI()?e.getURI():this.multiple?`${this.basename}_${this.counter++}.${t}`:`${this.basename}.${t}`}}const{BufferViewUsage:Ie}=ve;var Se;!function(e){e[e.JSON=1313821514]="JSON",e[e.BIN=5130562]="BIN"}(Se||(Se={}));class Ne{constructor(){this.v=B.DEFAULT_INSTANCE,this.h=new Set,this.C={},this.F=T.INTERLEAVED,this.lastReadBytes=0,this.lastWriteBytes=0}setLogger(e){return this.v=e,this}registerExtensions(e){for(const t of e)this.h.add(t),t.register();return this}registerDependencies(e){return Object.assign(this.C,e),this}setVertexLayout(e){return this.F=e,this}async read(e){return await this.readJSON(await this.readAsJSON(e))}async readAsJSON(e){return e.match(/^data:application\/octet-stream;/)||"glb"===S.extension(e)?this.U(e):this.P(e)}async readJSON(e){return e=this.j(e),this.L(e),class{static read(e,t=xe){const r=ge({},xe,t),{json:s}=e,n=new Ee;this.validate(e,r);const i=new Re(e),o=s.asset,a=n.getRoot().getAsset();o.copyright&&(a.copyright=o.copyright),o.extras&&(a.extras=o.extras),void 0!==s.extras&&n.getRoot().setExtras(ge({},s.extras));const u=s.extensionsUsed||[],h=s.extensionsRequired||[];for(const e of r.extensions)if(u.includes(e.EXTENSION_NAME)){const t=n.createExtension(e).setRequired(h.includes(e.EXTENSION_NAME));for(const e of t.readDependencies)t.install(e,r.dependencies[e])}const c=s.buffers||[];n.getRoot().listExtensionsUsed().filter((e=>e.prereadTypes.includes(E.BUFFER))).forEach((e=>e.preread(i,E.BUFFER))),i.buffers=c.map((e=>{const t=n.createBuffer(e.name);return e.extras&&t.setExtras(e.extras),e.uri&&0!==e.uri.indexOf("__")&&t.setURI(e.uri),t})),i.bufferViewBuffers=(s.bufferViews||[]).map(((t,r)=>{if(!i.bufferViews[r]){const s=e.json.buffers[t.buffer];i.bufferViews[r]=M.toView(s.uri?e.resources[s.uri]:e.resources["@glb.bin"],t.byteOffset||0,t.byteLength)}return i.buffers[t.buffer]})),i.accessors=(s.accessors||[]).map((e=>{const t=n.createAccessor(e.name,i.bufferViewBuffers[e.bufferView]).setType(e.type);if(e.extras&&t.setExtras(e.extras),void 0!==e.normalized&&t.setNormalized(e.normalized),void 0===e.bufferView&&!e.sparse)return t;let r;return r=void 0!==e.sparse?function(e,t){const r=we[e.componentType],s=X.getElementSize(e.type);let n;n=void 0!==e.bufferView?be(e,t):new r(e.count*s);const i=e.sparse,o=i.count,a=ge({},e,i.indices,{count:o,type:"SCALAR"}),u=ge({},e,i.values,{count:o}),h=be(a,t),c=be(u,t);for(let e=0;e<a.count;e++)for(let t=0;t<s;t++)n[h[e]*s+t]=c[e*s+t];return n}(e,i):be(e,i),t.setArray(r),t}));const f=s.images||[],l=s.textures||[];n.getRoot().listExtensionsUsed().filter((e=>e.prereadTypes.includes(E.TEXTURE))).forEach((e=>e.preread(i,E.TEXTURE))),i.textures=f.map((t=>{const r=n.createTexture(t.name);if(t.extras&&r.setExtras(t.extras),void 0!==t.bufferView){const n=s.bufferViews[t.bufferView],i=e.json.buffers[n.buffer],o=n.byteOffset||0,a=(i.uri?e.resources[i.uri]:e.resources["@glb.bin"]).slice(o,o+n.byteLength);r.setImage(a)}else void 0!==t.uri&&(r.setImage(e.resources[t.uri]),0!==t.uri.indexOf("__")&&r.setURI(t.uri));if(void 0!==t.mimeType)r.setMimeType(t.mimeType);else if(t.uri){const e=S.extension(t.uri);r.setMimeType(C.extensionToMimeType(e))}return r})),i.materials=(s.materials||[]).map((e=>{const t=n.createMaterial(e.name);e.extras&&t.setExtras(e.extras),void 0!==e.alphaMode&&t.setAlphaMode(e.alphaMode),void 0!==e.alphaCutoff&&t.setAlphaCutoff(e.alphaCutoff),void 0!==e.doubleSided&&t.setDoubleSided(e.doubleSided);const r=e.pbrMetallicRoughness||{};if(void 0!==r.baseColorFactor&&t.setBaseColorFactor(r.baseColorFactor),void 0!==e.emissiveFactor&&t.setEmissiveFactor(e.emissiveFactor),void 0!==r.metallicFactor&&t.setMetallicFactor(r.metallicFactor),void 0!==r.roughnessFactor&&t.setRoughnessFactor(r.roughnessFactor),void 0!==r.baseColorTexture){const e=r.baseColorTexture;t.setBaseColorTexture(i.textures[l[e.index].source]),i.setTextureInfo(t.getBaseColorTextureInfo(),e)}if(void 0!==e.emissiveTexture){const r=e.emissiveTexture;t.setEmissiveTexture(i.textures[l[r.index].source]),i.setTextureInfo(t.getEmissiveTextureInfo(),r)}if(void 0!==e.normalTexture){const r=e.normalTexture;t.setNormalTexture(i.textures[l[r.index].source]),i.setTextureInfo(t.getNormalTextureInfo(),r),void 0!==e.normalTexture.scale&&t.setNormalScale(e.normalTexture.scale)}if(void 0!==e.occlusionTexture){const r=e.occlusionTexture;t.setOcclusionTexture(i.textures[l[r.index].source]),i.setTextureInfo(t.getOcclusionTextureInfo(),r),void 0!==e.occlusionTexture.strength&&t.setOcclusionStrength(e.occlusionTexture.strength)}if(void 0!==r.metallicRoughnessTexture){const e=r.metallicRoughnessTexture;t.setMetallicRoughnessTexture(i.textures[l[e.index].source]),i.setTextureInfo(t.getMetallicRoughnessTextureInfo(),e)}return t}));const g=s.meshes||[];n.getRoot().listExtensionsUsed().filter((e=>e.prereadTypes.includes(E.PRIMITIVE))).forEach((e=>e.preread(i,E.PRIMITIVE))),i.meshes=g.map((e=>{const t=n.createMesh(e.name);return e.extras&&t.setExtras(e.extras),void 0!==e.weights&&t.setWeights(e.weights),(e.primitives||[]).forEach((r=>{const s=n.createPrimitive();r.extras&&s.setExtras(r.extras),void 0!==r.material&&s.setMaterial(i.materials[r.material]),void 0!==r.mode&&s.setMode(r.mode);for(const[e,t]of Object.entries(r.attributes||{}))s.setAttribute(e,i.accessors[t]);void 0!==r.indices&&s.setIndices(i.accessors[r.indices]);const o=e.extras&&e.extras.targetNames||[];(r.targets||[]).forEach(((e,t)=>{const r=o[t]||t.toString(),a=n.createPrimitiveTarget(r);for(const[t,r]of Object.entries(e))a.setAttribute(t,i.accessors[r]);s.addTarget(a)})),t.addPrimitive(s)})),t})),i.cameras=(s.cameras||[]).map((e=>{const t=n.createCamera(e.name).setType(e.type);if(e.extras&&t.setExtras(e.extras),e.type===te.Type.PERSPECTIVE){const r=e.perspective;t.setYFov(r.yfov),t.setZNear(r.znear),void 0!==r.zfar&&t.setZFar(r.zfar),void 0!==r.aspectRatio&&t.setAspectRatio(r.aspectRatio)}else{const r=e.orthographic;t.setZNear(r.znear).setZFar(r.zfar).setXMag(r.xmag).setYMag(r.ymag)}return t}));const p=s.nodes||[];n.getRoot().listExtensionsUsed().filter((e=>e.prereadTypes.includes(E.NODE))).forEach((e=>e.preread(i,E.NODE))),i.nodes=p.map((e=>{const t=n.createNode(e.name);if(e.extras&&t.setExtras(e.extras),void 0!==e.translation&&t.setTranslation(e.translation),void 0!==e.rotation&&t.setRotation(e.rotation),void 0!==e.scale&&t.setScale(e.scale),void 0!==e.matrix){const r=[0,0,0],s=[0,0,0,1],n=[1,1,1];P.decompose(e.matrix,r,s,n),t.setTranslation(r),t.setRotation(s),t.setScale(n)}return void 0!==e.weights&&t.setWeights(e.weights),t})),i.skins=(s.skins||[]).map((e=>{const t=n.createSkin(e.name);e.extras&&t.setExtras(e.extras),void 0!==e.inverseBindMatrices&&t.setInverseBindMatrices(i.accessors[e.inverseBindMatrices]),void 0!==e.skeleton&&t.setSkeleton(i.nodes[e.skeleton]);for(const r of e.joints)t.addJoint(i.nodes[r]);return t})),p.map(((e,t)=>{const r=i.nodes[t];(e.children||[]).forEach((e=>r.addChild(i.nodes[e]))),void 0!==e.mesh&&r.setMesh(i.meshes[e.mesh]),void 0!==e.camera&&r.setCamera(i.cameras[e.camera]),void 0!==e.skin&&r.setSkin(i.skins[e.skin])})),i.animations=(s.animations||[]).map((e=>{const t=n.createAnimation(e.name);e.extras&&t.setExtras(e.extras);const r=(e.samplers||[]).map((e=>{const r=n.createAnimationSampler().setInput(i.accessors[e.input]).setOutput(i.accessors[e.output]).setInterpolation(e.interpolation||Q.Interpolation.LINEAR);return e.extras&&r.setExtras(e.extras),t.addSampler(r),r}));return(e.channels||[]).forEach((e=>{const s=n.createAnimationChannel().setSampler(r[e.sampler]).setTargetNode(i.nodes[e.target.node]).setTargetPath(e.target.path);e.extras&&s.setExtras(e.extras),t.addChannel(s)})),t}));const d=s.scenes||[];return n.getRoot().listExtensionsUsed().filter((e=>e.prereadTypes.includes(E.SCENE))).forEach((e=>e.preread(i,E.SCENE))),i.scenes=d.map((e=>{const t=n.createScene(e.name);return e.extras&&t.setExtras(e.extras),(e.nodes||[]).map((e=>i.nodes[e])).forEach((e=>t.addChild(e))),t})),void 0!==s.scene&&n.getRoot().setDefaultScene(i.scenes[s.scene]),n.getRoot().listExtensionsUsed().forEach((e=>e.read(i))),n}static validate(e,t){const r=e.json;if("2.0"!==r.asset.version)throw new Error(`Unsupported glTF version, "${r.asset.version}".`);if(r.extensionsRequired)for(const e of r.extensionsRequired)if(!t.extensions.find((t=>t.EXTENSION_NAME===e)))throw new Error(`Missing required extension, "${e}".`);if(r.extensionsUsed)for(const e of r.extensionsUsed)t.extensions.find((t=>t.EXTENSION_NAME===e))||t.logger.warn(`Missing optional extension, "${e}".`)}}.read(e,{extensions:Array.from(this.h),dependencies:this.C,logger:this.v})}async binaryToJSON(e){const t=this._(M.assertView(e));this.L(t);const r=t.json;if(r.buffers&&r.buffers.some((e=>function(e,t){return void 0!==t.uri&&!(t.uri in e.resources)}(t,e))))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(r.images&&r.images.some((e=>function(e,t){return void 0!==t.uri&&!(t.uri in e.resources)&&void 0===t.bufferView}(t,e))))throw new Error("Cannot resolve external images with binaryToJSON().");return t}async readBinary(e){return this.readJSON(await this.binaryToJSON(M.assertView(e)))}async writeJSON(e,t={}){if(t.format===x.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 01 buffers.");return class{static write(e,t){const r=e.getRoot(),s={asset:ge({generator:"glTF-Transform v2.0.5"},r.getAsset()),extras:ge({},r.getExtras())},n={json:s,resources:{}},i=new ve(e,n,t),o=t.logger||B.DEFAULT_INSTANCE,a=new Set(t.extensions.map((e=>e.EXTENSION_NAME))),u=e.getRoot().listExtensionsUsed().filter((e=>a.has(e.extensionName))),h=e.getRoot().listExtensionsRequired().filter((e=>a.has(e.extensionName)));u.length<e.getRoot().listExtensionsUsed().length&&o.debug("Some extensions were not registered for I/O, and will not be written.");for(const e of u)for(const r of e.writeDependencies)e.install(r,t.dependencies[r]);function c(e,t,r,n){const o=[];let a=0;for(const t of e){const e=i.createAccessorDef(t);e.bufferView=s.bufferViews.length;const r=t.getArray(),n=M.pad(M.toView(r));e.byteOffset=a,a+=n.byteLength,o.push(n),i.accessorIndexMap.set(t,s.accessors.length),s.accessors.push(e)}const u={buffer:t,byteOffset:r,byteLength:M.concat(o).byteLength};return n&&(u.target=n),s.bufferViews.push(u),{buffers:o,byteLength:a}}function f(e,t,r){const n=e[0].getCount();let o=0;for(const t of e){const e=i.createAccessorDef(t);e.bufferView=s.bufferViews.length,e.byteOffset=o;const r=t.getElementSize(),n=t.getComponentSize();o+=M.padNumber(r*n),i.accessorIndexMap.set(t,s.accessors.length),s.accessors.push(e)}const a=n*o,u=new ArrayBuffer(a),h=new DataView(u);for(let t=0;t<n;t++){let r=0;for(const s of e){const e=s.getElementSize(),n=s.getComponentSize(),i=s.getComponentType(),a=s.getArray();for(let s=0;s<e;s++){const u=t*o+r+s*n,c=a[t*e+s];switch(i){case X.ComponentType.FLOAT:h.setFloat32(u,c,!0);break;case X.ComponentType.BYTE:h.setInt8(u,c);break;case X.ComponentType.SHORT:h.setInt16(u,c,!0);break;case X.ComponentType.UNSIGNED_BYTE:h.setUint8(u,c);break;case X.ComponentType.UNSIGNED_SHORT:h.setUint16(u,c,!0);break;case X.ComponentType.UNSIGNED_INT:h.setUint32(u,c,!0);break;default:throw new Error("Unexpected component type: "+i)}}r+=M.padNumber(e*n)}}return s.bufferViews.push({buffer:t,byteOffset:r,byteLength:a,byteStride:o,target:ve.BufferViewTarget.ARRAY_BUFFER}),{byteLength:a,buffers:[new Uint8Array(u)]}}const l=new Map;for(const t of e.getGraph().listEdges()){if(t.getParent()===r)continue;const e=t.getChild();if(e instanceof X){const r=l.get(e)||[];r.push(t),l.set(e,r)}}if(s.accessors=[],s.bufferViews=[],s.samplers=[],s.textures=[],s.images=r.listTextures().map(((e,t)=>{const r=i.createPropertyDef(e);e.getMimeType()&&(r.mimeType=e.getMimeType());const s=e.getImage();return s&&i.createImageData(r,s,e),i.imageIndexMap.set(e,t),r})),u.filter((e=>e.prewriteTypes.includes(E.ACCESSOR))).forEach((e=>e.prewrite(i,E.ACCESSOR))),r.listAccessors().forEach((e=>{const t=i.accessorUsageGroupedByParent,r=i.accessorParents;if(i.accessorIndexMap.has(e))return;const s=l.get(e)||[],n=i.getAccessorUsage(e);if(i.addAccessorToUsageGroup(e,n),t.has(n)){const t=s[0].getParent(),n=r.get(t)||new Set;n.add(e),r.set(t,n)}})),u.filter((e=>e.prewriteTypes.includes(E.BUFFER))).forEach((e=>e.prewrite(i,E.BUFFER))),(r.listAccessors().length>0||r.listTextures().length>0||i.otherBufferViews.size>0)&&0===r.listBuffers().length)throw new Error("Buffer required for Document resources, but none was found.");s.buffers=[],r.listBuffers().forEach(((e,r)=>{const o=i.createPropertyDef(e),a=i.accessorUsageGroupedByParent,u=i.accessorParents,h=e.listParents().filter((e=>e instanceof X)),l=new Set(h),g=[],p=s.buffers.length;let d=0;const m=i.listAccessorUsageGroups();for(const e in m)if(a.has(e))for(const r of Array.from(u.values())){const s=Array.from(r).filter((e=>l.has(e))).filter((t=>i.getAccessorUsage(t)===e));if(s.length)if(e!==Ie.ARRAY_BUFFER||t.vertexLayout===T.INTERLEAVED){const t=e===Ie.ARRAY_BUFFER?f(s,p,d):c(s,p,d);d+=t.byteLength,g.push(...t.buffers)}else for(const e of s){const t=f([e],p,d);d+=t.byteLength,g.push(...t.buffers)}}else{const t=m[e].filter((e=>l.has(e)));if(!t.length)continue;const r=c(t,p,d,e===Ie.ELEMENT_ARRAY_BUFFER?ve.BufferViewTarget.ELEMENT_ARRAY_BUFFER:void 0);d+=r.byteLength,g.push(...r.buffers)}if(i.imageBufferViews.length&&0===r)for(let e=0;e<i.imageBufferViews.length;e++)if(s.bufferViews[s.images[e].bufferView].byteOffset=d,d+=i.imageBufferViews[e].byteLength,g.push(i.imageBufferViews[e]),d%8){const e=8-d%8;d+=e,g.push(new Uint8Array(e))}if(i.otherBufferViews.has(e))for(const t of i.otherBufferViews.get(e))s.bufferViews.push({buffer:p,byteOffset:d,byteLength:t.byteLength}),i.otherBufferViewsIndexMap.set(t,s.bufferViews.length-1),d+=t.byteLength,g.push(t);if(d){let r;t.format===x.GLB?r="@glb.bin":(r=i.bufferURIGenerator.createURI(e,"bin"),o.uri=r),o.byteLength=d,n.resources[r]=M.concat(g)}s.buffers.push(o),i.bufferIndexMap.set(e,r)})),r.listAccessors().find((e=>!e.getBuffer()))&&o.warn("Skipped writing one or more Accessors: no Buffer assigned."),s.materials=r.listMaterials().map(((e,t)=>{const r=i.createPropertyDef(e);if(e.getAlphaMode()!==ue.AlphaMode.OPAQUE&&(r.alphaMode=e.getAlphaMode()),e.getAlphaMode()===ue.AlphaMode.MASK&&(r.alphaCutoff=e.getAlphaCutoff()),e.getDoubleSided()&&(r.doubleSided=!0),r.pbrMetallicRoughness={},P.eq(e.getBaseColorFactor(),[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=e.getBaseColorFactor()),P.eq(e.getEmissiveFactor(),[0,0,0])||(r.emissiveFactor=e.getEmissiveFactor()),1!==e.getRoughnessFactor()&&(r.pbrMetallicRoughness.roughnessFactor=e.getRoughnessFactor()),1!==e.getMetallicFactor()&&(r.pbrMetallicRoughness.metallicFactor=e.getMetallicFactor()),e.getBaseColorTexture()){const t=e.getBaseColorTexture(),s=e.getBaseColorTextureInfo();r.pbrMetallicRoughness.baseColorTexture=i.createTextureInfoDef(t,s)}if(e.getEmissiveTexture()){const t=e.getEmissiveTexture(),s=e.getEmissiveTextureInfo();r.emissiveTexture=i.createTextureInfoDef(t,s)}if(e.getNormalTexture()){const t=e.getNormalTexture(),s=e.getNormalTextureInfo(),n=i.createTextureInfoDef(t,s);1!==e.getNormalScale()&&(n.scale=e.getNormalScale()),r.normalTexture=n}if(e.getOcclusionTexture()){const t=e.getOcclusionTexture(),s=e.getOcclusionTextureInfo(),n=i.createTextureInfoDef(t,s);1!==e.getOcclusionStrength()&&(n.strength=e.getOcclusionStrength()),r.occlusionTexture=n}if(e.getMetallicRoughnessTexture()){const t=e.getMetallicRoughnessTexture(),s=e.getMetallicRoughnessTextureInfo();r.pbrMetallicRoughness.metallicRoughnessTexture=i.createTextureInfoDef(t,s)}return i.materialIndexMap.set(e,t),r})),s.meshes=r.listMeshes().map(((e,t)=>{const r=i.createPropertyDef(e);let s=null;return r.primitives=e.listPrimitives().map((e=>{const t={attributes:{}};t.mode=e.getMode();const r=e.getMaterial();r&&(t.material=i.materialIndexMap.get(r)),Object.keys(e.getExtras()).length&&(t.extras=e.getExtras());const n=e.getIndices();n&&(t.indices=i.accessorIndexMap.get(n));for(const r of e.listSemantics())t.attributes[r]=i.accessorIndexMap.get(e.getAttribute(r));for(const r of e.listTargets()){const e={};for(const t of r.listSemantics())e[t]=i.accessorIndexMap.get(r.getAttribute(t));t.targets=t.targets||[],t.targets.push(e)}return e.listTargets().length&&!s&&(s=e.listTargets().map((e=>e.getName()))),t})),e.getWeights().length&&(r.weights=e.getWeights()),s&&(r.extras=r.extras||{},r.extras.targetNames=s),i.meshIndexMap.set(e,t),r})),s.cameras=r.listCameras().map(((e,t)=>{const r=i.createPropertyDef(e);if(r.type=e.getType(),r.type===te.Type.PERSPECTIVE){r.perspective={znear:e.getZNear(),zfar:e.getZFar(),yfov:e.getYFov()};const t=e.getAspectRatio();null!==t&&(r.perspective.aspectRatio=t)}else r.orthographic={znear:e.getZNear(),zfar:e.getZFar(),xmag:e.getXMag(),ymag:e.getYMag()};return i.cameraIndexMap.set(e,t),r})),s.nodes=r.listNodes().map(((e,t)=>{const r=i.createPropertyDef(e);return P.eq(e.getTranslation(),[0,0,0])||(r.translation=e.getTranslation()),P.eq(e.getRotation(),[0,0,0,1])||(r.rotation=e.getRotation()),P.eq(e.getScale(),[1,1,1])||(r.scale=e.getScale()),e.getWeights().length&&(r.weights=e.getWeights()),i.nodeIndexMap.set(e,t),r})),s.skins=r.listSkins().map(((e,t)=>{const r=i.createPropertyDef(e),s=e.getInverseBindMatrices();s&&(r.inverseBindMatrices=i.accessorIndexMap.get(s));const n=e.getSkeleton();return n&&(r.skeleton=i.nodeIndexMap.get(n)),r.joints=e.listJoints().map((e=>i.nodeIndexMap.get(e))),i.skinIndexMap.set(e,t),r})),r.listNodes().forEach(((e,t)=>{const r=s.nodes[t],n=e.getMesh();n&&(r.mesh=i.meshIndexMap.get(n));const o=e.getCamera();o&&(r.camera=i.cameraIndexMap.get(o));const a=e.getSkin();a&&(r.skin=i.skinIndexMap.get(a)),e.listChildren().length>0&&(r.children=e.listChildren().map((e=>i.nodeIndexMap.get(e))))})),s.animations=r.listAnimations().map(((e,t)=>{const r=i.createPropertyDef(e),s=new Map;return r.samplers=e.listSamplers().map(((e,t)=>{const r=i.createPropertyDef(e);return r.input=i.accessorIndexMap.get(e.getInput()),r.output=i.accessorIndexMap.get(e.getOutput()),r.interpolation=e.getInterpolation(),s.set(e,t),r})),r.channels=e.listChannels().map((e=>{const t=i.createPropertyDef(e);return t.sampler=s.get(e.getSampler()),t.target={node:i.nodeIndexMap.get(e.getTargetNode()),path:e.getTargetPath()},t})),i.animationIndexMap.set(e,t),r})),s.scenes=r.listScenes().map(((e,t)=>{const r=i.createPropertyDef(e);return r.nodes=e.listChildren().map((e=>i.nodeIndexMap.get(e))),i.sceneIndexMap.set(e,t),r}));const g=r.getDefaultScene();return g&&(s.scene=r.listScenes().indexOf(g)),s.extensionsUsed=u.map((e=>e.extensionName)),s.extensionsRequired=h.map((e=>e.extensionName)),u.forEach((e=>e.write(i))),function(e){const t=[];for(const r in e){const s=e[r];(Array.isArray(s)&&0===s.length||null===s||""===s||s&&"object"==typeof s&&0===Object.keys(s).length)&&t.push(r)}for(const r of t)delete e[r]}(s),n}}.write(e,{format:t.format||x.GLTF,basename:t.basename||"",logger:this.v,vertexLayout:this.F,dependencies:ge({},this.C),extensions:Array.from(this.h)})}async writeBinary(e){const{json:t,resources:r}=await this.writeJSON(e,{format:x.GLB}),s=new Uint32Array([1179937895,2,12]),n=JSON.stringify(t),i=M.pad(M.encodeText(n),32),o=M.toView(new Uint32Array([i.byteLength,1313821514])),a=M.concat([o,i]);s[s.length-1]+=a.byteLength;const u=Object.values(r)[0];if(!u||!u.byteLength)return M.concat([M.toView(s),a]);const h=M.pad(u,0),c=M.toView(new Uint32Array([h.byteLength,5130562])),f=M.concat([c,h]);return s[s.length-1]+=f.byteLength,M.concat([M.toView(s),a,f])}async P(e){this.lastReadBytes=0;const t=await this.readURI(e,"text");this.lastReadBytes+=t.length;const r={json:JSON.parse(t),resources:{}};return await this.D(r,this.dirname(e)),this.L(r),r}async U(e){const t=await this.readURI(e,"view");this.lastReadBytes=t.byteLength;const r=this._(t);return await this.D(r,this.dirname(e)),this.L(r),r}async D(e,t){var r=this;const s=[...e.json.images||[],...e.json.buffers||[]].map((async function(s){const n=s.uri;if(!n||n.match(/data:/))return Promise.resolve();e.resources[n]=await r.readURI(r.resolve(t,n),"view"),r.lastReadBytes+=e.resources[n].byteLength}));await Promise.all(s)}L(e){function t(t){if(t.uri)if(t.uri in e.resources)M.assertView(e.resources[t.uri]);else if(t.uri.match(/data:/)){const r=`__${J()}.${S.extension(t.uri)}`;e.resources[r]=M.createBufferFromDataURI(t.uri),t.uri=r}}(e.json.images||[]).forEach((e=>{if(void 0===e.bufferView&&void 0===e.uri)throw new Error("Missing resource URI or buffer view.");t(e)})),(e.json.buffers||[]).forEach(t)}j(e){const{images:t,buffers:r}=e.json;return e={json:ge({},e.json),resources:ge({},e.resources)},t&&(e.json.images=t.map((e=>ge({},e)))),r&&(e.json.buffers=r.map((e=>ge({},e)))),e}_(e){const t=new Uint32Array(e.buffer,e.byteOffset,3);if(1179937895!==t[0])throw new Error("Invalid glTF asset.");if(2!==t[1])throw new Error(`Unsupported glTF binary version, "${t[1]}".`);const r=new Uint32Array(e.buffer,e.byteOffset+12,2);if(r[1]!==Se.JSON)throw new Error("Missing required GLB JSON chunk.");const s=r[0],n=M.decodeText(M.toView(e,20,s)),i=JSON.parse(n),o=20+s;if(e.byteLength<=o)return{json:i,resources:{}};const a=new Uint32Array(e.buffer,e.byteOffset+o,2);if(a[1]!==Se.BIN)throw new Error("Expected GLB BIN in second chunk.");return{json:i,resources:{"@glb.bin":M.toView(e,o+8,a[0])}}}}class Ce extends Ne{constructor(e=null,t=W.DEFAULT_INIT){super(),this.k=void 0,this.J=void 0,this.$=void 0,this.V=void 0,this.q=!1,this.k=r(87).promises,this.J=r(7263),this.$=e,this.V=t}setAllowHTTP(e){if(e&&!this.$)throw new Error("NodeIO requires a Fetch API implementation for HTTP requests.");return this.q=e,this}async readURI(e,t){if(W.isAbsoluteURL(e)){if(!this.q||!this.$)throw new Error("Network request blocked. Allow HTTP requests explicitly, if needed.");const r=await this.$(e,this.V);switch(t){case"view":return new Uint8Array(await r.arrayBuffer());case"text":return r.text()}}else switch(t){case"view":return this.k.readFile(e);case"text":return this.k.readFile(e,"utf8")}}resolve(e,t){return W.isAbsoluteURL(e)||W.isAbsoluteURL(t)?W.resolve(e,t):this.J.resolve(e,t)}dirname(e){return W.isAbsoluteURL(e)?W.dirname(e):this.J.dirname(e)}async write(e,t){const r=!!e.match(/\.glb$/);await(r?this.W(e,t):this.H(e,t))}async H(e,t){var r=this;this.lastWriteBytes=0;const{json:s,resources:n}=await this.writeJSON(t,{format:x.GLTF,basename:S.basename(e)}),{k:i,J:o}=this,a=o.dirname(e),u=JSON.stringify(s,null,2);this.lastWriteBytes+=u.length,await i.writeFile(e,u);const h=Object.keys(n).map((async function(e){if(W.isAbsoluteURL(e)){if("bin"===S.extension(e))throw new Error(`Cannot write buffer to path "${e}".`);return}const t=d.from(n[e]);await i.writeFile(o.join(a,e),t),r.lastWriteBytes+=t.byteLength}));await Promise.all(h)}async W(e,t){const r=d.from(await this.writeBinary(t));await this.k.writeFile(e,r),this.lastWriteBytes=r.byteLength}}class _e extends Ne{constructor(e){super(),this.J=void 0,this.J=e}async readURI(e,t){switch(t){case"view":return Deno.readFile(e);case"text":return Deno.readTextFile(e)}}resolve(e,t){return this.J.resolve(e,t)}dirname(e){return this.J.dirname(e)}}class Oe extends Ne{constructor(e=W.DEFAULT_INIT){super(),this.V=void 0,this.V=e}async readURI(e,t){const r=await fetch(e,this.V);switch(t){case"view":return new Uint8Array(await r.arrayBuffer());case"text":return r.text()}}resolve(e,t){return W.resolve(e,t)}dirname(e){return W.dirname(e)}}},9742:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),r=t[0],s=t[1];return 3*(r+s)/4-s},t.toByteArray=function(e){var t,r,i=u(e),o=i[0],a=i[1],h=new n(function(e,t,r){return 3*(t+r)/4-r}(0,o,a)),c=0,f=a>0?o-4:o;for(r=0;r<f;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],h[c++]=t>>16&255,h[c++]=t>>8&255,h[c++]=255&t;2===a&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,h[c++]=255&t);1===a&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,h[c++]=t>>8&255,h[c++]=255&t);return h},t.fromByteArray=function(e){for(var t,s=e.length,n=s%3,i=[],o=16383,a=0,u=s-n;a<u;a+=o)i.push(h(e,a,a+o>u?u:a+o));1===n?(t=e[s-1],i.push(r[t>>2]+r[t<<4&63]+"==")):2===n&&(t=(e[s-2]<<8)+e[s-1],i.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return i.join("")};for(var r=[],s=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=i.length;o<a;++o)r[o]=i[o],s[i.charCodeAt(o)]=o;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function h(e,t,s){for(var n,i,o=[],a=t;a<s;a+=3)n=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(r[(i=n)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63},8764:(e,t,r)=>{"use strict";var s=r(9742),n=r(645),i=r(5826);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return h(this,e,t,r)}function h(e,t,r,s){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,s){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(s||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===s?new Uint8Array(t):void 0===s?new Uint8Array(t,r):new Uint8Array(t,r,s);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=l(e,t);return e}(e,t,r,s):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var s=0|p(t,r),n=(e=a(e,s)).write(t,r);n!==s&&(e=e.slice(0,n));return e}(e,t,r):function(e,t){if(u.isBuffer(t)){var r=0|g(t.length);return 0===(e=a(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(s=t.length)!=s?a(e,0):l(e,t);if("Buffer"===t.type&&i(t.data))return l(e,t.data)}var s;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(c(t),e=a(e,t<0?0:0|g(t)),!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function l(e,t){var r=t.length<0?0:0|g(t.length);e=a(e,r);for(var s=0;s<r;s+=1)e[s]=255&t[s];return e}function g(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return k(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(e).length;default:if(s)return k(e).length;t=(""+t).toLowerCase(),s=!0}}function d(e,t,r){var s=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return M(this,t,r);case"ascii":return S(this,t,r);case"latin1":case"binary":return N(this,t,r);case"base64":return v(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,r);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function m(e,t,r){var s=e[t];e[t]=e[r],e[r]=s}function y(e,t,r,s,n){if(0===e.length)return-1;if("string"==typeof r?(s=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"==typeof t&&(t=u.from(t,s)),u.isBuffer(t))return 0===t.length?-1:E(e,t,r,s,n);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):E(e,[t],r,s,n);throw new TypeError("val must be string, number or Buffer")}function E(e,t,r,s,n){var i,o=1,a=e.length,u=t.length;if(void 0!==s&&("ucs2"===(s=String(s).toLowerCase())||"ucs-2"===s||"utf16le"===s||"utf-16le"===s)){if(e.length<2||t.length<2)return-1;o=2,a/=2,u/=2,r/=2}function h(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var c=-1;for(i=r;i<a;i++)if(h(e,i)===h(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===u)return c*o}else-1!==c&&(i-=i-c),c=-1}else for(r+u>a&&(r=a-u),i=r;i>=0;i--){for(var f=!0,l=0;l<u;l++)if(h(e,i+l)!==h(t,l)){f=!1;break}if(f)return i}return-1}function T(e,t,r,s){r=Number(r)||0;var n=e.length-r;s?(s=Number(s))>n&&(s=n):s=n;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");s>i/2&&(s=i/2);for(var o=0;o<s;++o){var a=parseInt(t.substr(2*o,2),16);if(isNaN(a))return o;e[r+o]=a}return o}function R(e,t,r,s){return G(k(t,e.length-r),e,r,s)}function w(e,t,r,s){return G(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,s)}function x(e,t,r,s){return w(e,t,r,s)}function b(e,t,r,s){return G(Y(t),e,r,s)}function A(e,t,r,s){return G(function(e,t){for(var r,s,n,i=[],o=0;o<e.length&&!((t-=2)<0);++o)s=(r=e.charCodeAt(o))>>8,n=r%256,i.push(n),i.push(s);return i}(t,e.length-r),e,r,s)}function v(e,t,r){return 0===t&&r===e.length?s.fromByteArray(e):s.fromByteArray(e.slice(t,r))}function M(e,t,r){r=Math.min(e.length,r);for(var s=[],n=t;n<r;){var i,o,a,u,h=e[n],c=null,f=h>239?4:h>223?3:h>191?2:1;if(n+f<=r)switch(f){case 1:h<128&&(c=h);break;case 2:128==(192&(i=e[n+1]))&&(u=(31&h)<<6|63&i)>127&&(c=u);break;case 3:i=e[n+1],o=e[n+2],128==(192&i)&&128==(192&o)&&(u=(15&h)<<12|(63&i)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:i=e[n+1],o=e[n+2],a=e[n+3],128==(192&i)&&128==(192&o)&&128==(192&a)&&(u=(15&h)<<18|(63&i)<<12|(63&o)<<6|63&a)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,s.push(c>>>10&1023|55296),c=56320|1023&c),s.push(c),n+=f}return function(e){var t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);var r="",s=0;for(;s<t;)r+=String.fromCharCode.apply(String,e.slice(s,s+=I));return r}(s)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==r.g.TYPED_ARRAY_SUPPORT?r.g.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,r){return h(null,e,t,r)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,r){return function(e,t,r,s){return c(t),t<=0?a(e,t):void 0!==r?"string"==typeof s?a(e,t).fill(r,s):a(e,t).fill(r):a(e,t)}(null,e,t,r)},u.allocUnsafe=function(e){return f(null,e)},u.allocUnsafeSlow=function(e){return f(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,s=t.length,n=0,i=Math.min(r,s);n<i;++n)if(e[n]!==t[n]){r=e[n],s=t[n];break}return r<s?-1:s<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!i(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var s=u.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var o=e[r];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(s,n),n+=o.length}return s},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?M(this,0,e):d.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,r,s,n){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===s&&(s=0),void 0===n&&(n=this.length),t<0||r>e.length||s<0||n>this.length)throw new RangeError("out of range index");if(s>=n&&t>=r)return 0;if(s>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(n>>>=0)-(s>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(i,o),h=this.slice(s,n),c=e.slice(t,r),f=0;f<a;++f)if(h[f]!==c[f]){i=h[f],o=c[f];break}return i<o?-1:o<i?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},u.prototype.write=function(e,t,r,s){if(void 0===t)s="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)s=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===s&&(s="utf8")):(s=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");for(var i=!1;;)switch(s){case"hex":return T(this,e,t,r);case"utf8":case"utf-8":return R(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return b(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function S(e,t,r){var s="";r=Math.min(e.length,r);for(var n=t;n<r;++n)s+=String.fromCharCode(127&e[n]);return s}function N(e,t,r){var s="";r=Math.min(e.length,r);for(var n=t;n<r;++n)s+=String.fromCharCode(e[n]);return s}function C(e,t,r){var s=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>s)&&(r=s);for(var n="",i=t;i<r;++i)n+=j(e[i]);return n}function _(e,t,r){for(var s=e.slice(t,r),n="",i=0;i<s.length;i+=2)n+=String.fromCharCode(s[i]+256*s[i+1]);return n}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function U(e,t,r,s,n,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<i)throw new RangeError('"value" argument is out of bounds');if(r+s>e.length)throw new RangeError("Index out of range")}function B(e,t,r,s){t<0&&(t=65535+t+1);for(var n=0,i=Math.min(e.length-r,2);n<i;++n)e[r+n]=(t&255<<8*(s?n:1-n))>>>8*(s?n:1-n)}function P(e,t,r,s){t<0&&(t=4294967295+t+1);for(var n=0,i=Math.min(e.length-r,4);n<i;++n)e[r+n]=t>>>8*(s?n:3-n)&255}function F(e,t,r,s,n,i){if(r+s>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(e,t,r,s,i){return i||F(e,0,r,4),n.write(e,t,r,s,23,4),r+4}function D(e,t,r,s,i){return i||F(e,0,r,8),n.write(e,t,r,s,52,8),r+8}u.prototype.slice=function(e,t){var r,s=this.length;if((e=~~e)<0?(e+=s)<0&&(e=0):e>s&&(e=s),(t=void 0===t?s:~~t)<0?(t+=s)<0&&(t=0):t>s&&(t=s),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=u.prototype;else{var n=t-e;r=new u(n,void 0);for(var i=0;i<n;++i)r[i]=this[i+e]}return r},u.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var s=this[e],n=1,i=0;++i<t&&(n*=256);)s+=this[e+i]*n;return s},u.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var s=this[e+--t],n=1;t>0&&(n*=256);)s+=this[e+--t]*n;return s},u.prototype.readUInt8=function(e,t){return t||O(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||O(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||O(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var s=this[e],n=1,i=0;++i<t&&(n*=256);)s+=this[e+i]*n;return s>=(n*=128)&&(s-=Math.pow(2,8*t)),s},u.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||O(e,t,this.length);for(var s=t,n=1,i=this[e+--s];s>0&&(n*=256);)i+=this[e+--s]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||O(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){t||O(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||O(e,4,this.length),n.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||O(e,4,this.length),n.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||O(e,8,this.length),n.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||O(e,8,this.length),n.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,r,s){(e=+e,t|=0,r|=0,s)||U(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,i=0;for(this[t]=255&e;++i<r&&(n*=256);)this[t+i]=e/n&255;return t+r},u.prototype.writeUIntBE=function(e,t,r,s){(e=+e,t|=0,r|=0,s)||U(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,i=1;for(this[t+n]=255&e;--n>=0&&(i*=256);)this[t+n]=e/i&255;return t+r},u.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):P(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,r,s){if(e=+e,t|=0,!s){var n=Math.pow(2,8*r-1);U(this,e,t,r,n-1,-n)}var i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},u.prototype.writeIntBE=function(e,t,r,s){if(e=+e,t|=0,!s){var n=Math.pow(2,8*r-1);U(this,e,t,r,n-1,-n)}var i=r-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):P(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||U(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):P(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,s){if(r||(r=0),s||0===s||(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<r&&(s=r),s===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-r&&(s=e.length-t+r);var n,i=s-r;if(this===e&&r<t&&t<s)for(n=i-1;n>=0;--n)e[n+t]=this[n+r];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(n=0;n<i;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+i),t);return i},u.prototype.fill=function(e,t,r,s){if("string"==typeof e){if("string"==typeof t?(s=t,t=0,r=this.length):"string"==typeof r&&(s=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==s&&"string"!=typeof s)throw new TypeError("encoding must be a string");if("string"==typeof s&&!u.isEncoding(s))throw new TypeError("Unknown encoding: "+s)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=u.isBuffer(e)?e:k(new u(e,s).toString()),a=o.length;for(i=0;i<r-t;++i)this[i+t]=o[i%a]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function j(e){return e<16?"0"+e.toString(16):e.toString(16)}function k(e,t){var r;t=t||1/0;for(var s=e.length,n=null,i=[],o=0;o<s;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===s){(t-=3)>-1&&i.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&i.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function Y(e){return s.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,r,s){for(var n=0;n<s&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}},9685:(e,t,r)=>{"use strict";r.d(t,{WT:()=>s});var s="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})},5975:(e,t,r)=>{"use strict";r.d(t,{U_:()=>n,GH:()=>i,Jp:()=>o,xJ:()=>a,j6:()=>u,Iw:()=>h});var s=r(9685);function n(e,t){var r=t[0],s=t[1],n=t[2],i=t[3],o=t[4],a=t[5],u=t[6],h=t[7],c=t[8],f=t[9],l=t[10],g=t[11],p=t[12],d=t[13],m=t[14],y=t[15],E=r*a-s*o,T=r*u-n*o,R=r*h-i*o,w=s*u-n*a,x=s*h-i*a,b=n*h-i*u,A=c*d-f*p,v=c*m-l*p,M=c*y-g*p,I=f*m-l*d,S=f*y-g*d,N=l*y-g*m,C=E*N-T*S+R*I+w*M-x*v+b*A;return C?(C=1/C,e[0]=(a*N-u*S+h*I)*C,e[1]=(n*S-s*N-i*I)*C,e[2]=(d*b-m*x+y*w)*C,e[3]=(l*x-f*b-g*w)*C,e[4]=(u*M-o*N-h*v)*C,e[5]=(r*N-n*M+i*v)*C,e[6]=(m*R-p*b-y*T)*C,e[7]=(c*b-l*R+g*T)*C,e[8]=(o*S-a*M+h*A)*C,e[9]=(s*M-r*S-i*A)*C,e[10]=(p*x-d*R+y*E)*C,e[11]=(f*R-c*x-g*E)*C,e[12]=(a*v-o*I-u*A)*C,e[13]=(r*I-s*v+n*A)*C,e[14]=(d*T-p*w-m*E)*C,e[15]=(c*w-f*T+l*E)*C,e):null}function i(e){var t=e[0],r=e[1],s=e[2],n=e[3],i=e[4],o=e[5],a=e[6],u=e[7],h=e[8],c=e[9],f=e[10],l=e[11],g=e[12],p=e[13],d=e[14],m=e[15];return(t*o-r*i)*(f*m-l*d)-(t*a-s*i)*(c*m-l*p)+(t*u-n*i)*(c*d-f*p)+(r*a-s*o)*(h*m-l*g)-(r*u-n*o)*(h*d-f*g)+(s*u-n*a)*(h*p-c*g)}function o(e,t,r){var s=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],h=t[6],c=t[7],f=t[8],l=t[9],g=t[10],p=t[11],d=t[12],m=t[13],y=t[14],E=t[15],T=r[0],R=r[1],w=r[2],x=r[3];return e[0]=T*s+R*a+w*f+x*d,e[1]=T*n+R*u+w*l+x*m,e[2]=T*i+R*h+w*g+x*y,e[3]=T*o+R*c+w*p+x*E,T=r[4],R=r[5],w=r[6],x=r[7],e[4]=T*s+R*a+w*f+x*d,e[5]=T*n+R*u+w*l+x*m,e[6]=T*i+R*h+w*g+x*y,e[7]=T*o+R*c+w*p+x*E,T=r[8],R=r[9],w=r[10],x=r[11],e[8]=T*s+R*a+w*f+x*d,e[9]=T*n+R*u+w*l+x*m,e[10]=T*i+R*h+w*g+x*y,e[11]=T*o+R*c+w*p+x*E,T=r[12],R=r[13],w=r[14],x=r[15],e[12]=T*s+R*a+w*f+x*d,e[13]=T*n+R*u+w*l+x*m,e[14]=T*i+R*h+w*g+x*y,e[15]=T*o+R*c+w*p+x*E,e}function a(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function u(e,t){var r=new s.WT(3);!function(e,t){var r=t[0],s=t[1],n=t[2],i=t[4],o=t[5],a=t[6],u=t[8],h=t[9],c=t[10];e[0]=Math.hypot(r,s,n),e[1]=Math.hypot(i,o,a),e[2]=Math.hypot(u,h,c)}(r,t);var n=1/r[0],i=1/r[1],o=1/r[2],a=t[0]*n,u=t[1]*i,h=t[2]*o,c=t[4]*n,f=t[5]*i,l=t[6]*o,g=t[8]*n,p=t[9]*i,d=t[10]*o,m=a+f+d,y=0;return m>0?(y=2*Math.sqrt(m+1),e[3]=.25*y,e[0]=(l-p)/y,e[1]=(g-h)/y,e[2]=(u-c)/y):a>f&&a>d?(y=2*Math.sqrt(1+a-f-d),e[3]=(l-p)/y,e[0]=.25*y,e[1]=(u+c)/y,e[2]=(g+h)/y):f>d?(y=2*Math.sqrt(1+f-a-d),e[3]=(g-h)/y,e[0]=(u+c)/y,e[1]=.25*y,e[2]=(l+p)/y):(y=2*Math.sqrt(1+d-a-f),e[3]=(u-c)/y,e[0]=(g+h)/y,e[1]=(l+p)/y,e[2]=.25*y),e}function h(e,t,r,s){var n=t[0],i=t[1],o=t[2],a=t[3],u=n+n,h=i+i,c=o+o,f=n*u,l=n*h,g=n*c,p=i*h,d=i*c,m=o*c,y=a*u,E=a*h,T=a*c,R=s[0],w=s[1],x=s[2];return e[0]=(1-(p+m))*R,e[1]=(l+T)*R,e[2]=(g-E)*R,e[3]=0,e[4]=(l-T)*w,e[5]=(1-(f+m))*w,e[6]=(d+y)*w,e[7]=0,e[8]=(g+E)*x,e[9]=(d-y)*x,e[10]=(1-(f+p))*x,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}},7160:(e,t,r)=>{"use strict";r.d(t,{kE:()=>n,VV:()=>i,Fp:()=>o,bA:()=>a,Fv:()=>u,fF:()=>h});var s=r(9685);function n(e){var t=e[0],r=e[1],s=e[2];return Math.hypot(t,r,s)}function i(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function o(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function a(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function u(e,t){var r=t[0],s=t[1],n=t[2],i=r*r+s*s+n*n;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function h(e,t,r){var s=t[0],n=t[1],i=t[2],o=r[3]*s+r[7]*n+r[11]*i+r[15];return o=o||1,e[0]=(r[0]*s+r[4]*n+r[8]*i+r[12])/o,e[1]=(r[1]*s+r[5]*n+r[9]*i+r[13])/o,e[2]=(r[2]*s+r[6]*n+r[10]*i+r[14])/o,e}var c,f;c=new s.WT(3),s.WT!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),f=c},645:(e,t)=>{t.read=function(e,t,r,s,n){var i,o,a=8*n-s-1,u=(1<<a)-1,h=u>>1,c=-7,f=r?n-1:0,l=r?-1:1,g=e[t+f];for(f+=l,i=g&(1<<-c)-1,g>>=-c,c+=a;c>0;i=256*i+e[t+f],f+=l,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=l,c-=8);if(0===i)i=1-h;else{if(i===u)return o?NaN:1/0*(g?-1:1);o+=Math.pow(2,s),i-=h}return(g?-1:1)*o*Math.pow(2,i-s)},t.write=function(e,t,r,s,n,i){var o,a,u,h=8*i-n-1,c=(1<<h)-1,f=c>>1,l=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,g=s?0:i-1,p=s?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?l/u:l*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=c?(a=0,o=c):o+f>=1?(a=(t*u-1)*Math.pow(2,n),o+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,n),o=0));n>=8;e[r+g]=255&a,g+=p,a/=256,n-=8);for(o=o<<n|a,h+=n;h>0;e[r+g]=255&o,g+=p,o/=256,h-=8);e[r+g-p]|=128*d}},5826:e=>{var t={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==t.call(e)}},87:()=>{},7263:()=>{}}]);